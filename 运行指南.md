# ğŸŒŠ åŸå¸‚æ°´åŠ¡ WebGIS ç³»ç»Ÿ - è¿è¡ŒæŒ‡å—

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **Spring Boot + React** çš„åŸå¸‚æ°´åŠ¡è®¾æ–½ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«åç«¯ API æœåŠ¡å’Œå‰ç«¯å¯è§†åŒ–ç•Œé¢ã€‚

### ğŸ›  æŠ€æœ¯æ ˆ

**åç«¯:**

- Spring Boot 3.1.6
- PostgreSQL æ•°æ®åº“
- MyBatis-Plus ORM
- Spring Security + JWT è®¤è¯

**å‰ç«¯:**

- React 19 + TypeScript
- Vite æ„å»ºå·¥å…·
- Ant Design UI ç»„ä»¶
- OpenLayers åœ°å›¾
- ECharts æ•°æ®å¯è§†åŒ–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

1. **JDK 17** - è¿è¡Œåç«¯
2. **Maven 3.6+** - æ„å»ºåç«¯
3. **Node.js 18+** - è¿è¡Œå‰ç«¯
4. **Yarn** - å‰ç«¯åŒ…ç®¡ç†å™¨
5. **PostgreSQL** - æ•°æ®åº“ï¼ˆéœ€åˆ›å»º `smart_water_db` æ•°æ®åº“ï¼‰

---

## ğŸ¯ è¿è¡Œæ–¹å¼

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èç”¨äºå¼€å‘å’Œæ¼”ç¤ºï¼‰

ç›´æ¥è¿è¡Œå¯åŠ¨è„šæœ¬ï¼š

```powershell
.\start-dev.ps1
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- âœ… æ£€æŸ¥ç¯å¢ƒé…ç½®
- âœ… å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 8080ï¼‰
- âœ… å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆç«¯å£ 5599ï¼‰
- âœ… åœ¨æ–°çª—å£ä¸­æ˜¾ç¤ºæ—¥å¿—

è®¿é—®åœ°å€: **http://localhost:5599**

---

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

#### 1. å¯åŠ¨åç«¯

æ‰“å¼€ç»ˆç«¯ 1:

```powershell
cd backend
mvn spring-boot:run
```

ç­‰å¾…çœ‹åˆ°: `Started WaterWebgisApplication in X.XXX seconds`

#### 2. å¯åŠ¨å‰ç«¯

æ‰“å¼€ç»ˆç«¯ 2:

```powershell
cd frontend
yarn install  # é¦–æ¬¡è¿è¡Œéœ€è¦
yarn dev
```

è®¿é—®åœ°å€: **http://localhost:5599**

---

### æ–¹å¼ä¸‰ï¼šç”Ÿäº§æ¨¡å¼æ‰“åŒ…è¿è¡Œ

é€‚ç”¨äº**è®ºæ–‡æ¼”ç¤º**æˆ–**æ­£å¼éƒ¨ç½²**ã€‚

#### 1ï¸âƒ£ æ‰“åŒ…åç«¯

```powershell
cd backend
mvn clean package -DskipTests
```

ç”Ÿæˆæ–‡ä»¶: `backend/target/backend-0.0.1-SNAPSHOT.jar`

#### 2ï¸âƒ£ æ‰“åŒ…å‰ç«¯

```powershell
cd frontend
yarn build
```

ç”Ÿæˆç›®å½•: `frontend/dist/`

#### 3ï¸âƒ£ è¿è¡Œ

**å¯åŠ¨åç«¯:**

```powershell
cd backend
java -jar target/backend-0.0.1-SNAPSHOT.jar
```

**å¯åŠ¨å‰ç«¯:**

```powershell
cd frontend
yarn preview
```

è®¿é—®åœ°å€: **http://localhost:5599**

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

æ›´å¤šè¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹å·¥ä½œæµæ–‡æ¡£ï¼š

- `/run-dev` - å¼€å‘æ¨¡å¼è¿è¡ŒæŒ‡å—
- `/build-prod` - ç”Ÿäº§æ¨¡å¼æ‰“åŒ…æŒ‡å—

åœ¨ AI åŠ©æ‰‹ä¸­è¾“å…¥ `/run-dev` æˆ– `/build-prod` æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ã€‚

---

## âš™ï¸ é…ç½®è¯´æ˜

### åç«¯é…ç½®ï¼ˆapplication.ymlï¼‰

```yaml
server:
  port: 8080

spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/smart_water_db
    username: postgres
    password: root

jwt:
  secret: waterWebgisSecureKey2026waterWebgisSecureKey2026
  expiration: 86400000 # 24å°æ—¶
```

### å‰ç«¯é…ç½®

å¼€å‘æœåŠ¡å™¨é…ç½®åœ¨ `package.json`:

```json
{
  "scripts": {
    "dev": "vite --host --port 5599"
  }
}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

**é—®é¢˜:** `Port 8080/5599 already in use`

**è§£å†³:**

```powershell
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8080
# ç»“æŸè¯¥è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜:** `Connection refused: localhost:5432`

**è§£å†³:**

- ç¡®è®¤ PostgreSQL æœåŠ¡å·²å¯åŠ¨
- ç¡®è®¤æ•°æ®åº“ `smart_water_db` å·²åˆ›å»º
- æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®

### 3. å‰ç«¯ä¾èµ–å®‰è£…å¤±è´¥

**é—®é¢˜:** `yarn install` æŠ¥é”™

**è§£å†³:**

```powershell
# æ¸…é™¤ç¼“å­˜
yarn cache clean
# åˆ é™¤ node_modules
rm -rf node_modules
# é‡æ–°å®‰è£…
yarn install
```

### 4. Maven æ„å»ºå¤±è´¥

**é—®é¢˜:** Maven ä¸‹è½½ä¾èµ–æ…¢æˆ–å¤±è´¥

**è§£å†³:**
é…ç½®å›½å†…é•œåƒï¼Œåœ¨ `~/.m2/settings.xml` æ·»åŠ :

```xml
<mirror>
  <id>aliyun</id>
  <mirrorOf>central</mirrorOf>
  <url>https://maven.aliyun.com/repository/public</url>
</mirror>
```

---

## ğŸ“¦ æ‰“åŒ…åçš„æ–‡ä»¶

### åç«¯ JAR åŒ…

- **æ–‡ä»¶:** `backend/target/backend-0.0.1-SNAPSHOT.jar`
- **å¤§å°:** çº¦ 60-80 MB
- **è¿è¡Œ:** `java -jar backend-0.0.1-SNAPSHOT.jar`

### å‰ç«¯é™æ€æ–‡ä»¶

- **ç›®å½•:** `frontend/dist/`
- **å†…å®¹:** HTML, CSS, JS å’Œèµ„æºæ–‡ä»¶
- **éƒ¨ç½²:** å¯ç›´æ¥éƒ¨ç½²åˆ° Nginx æˆ–å…¶ä»–é™æ€æœåŠ¡å™¨

---

## ğŸ“ è®ºæ–‡æ¼”ç¤ºå»ºè®®

### æ¨èæµç¨‹

1. **æå‰å‡†å¤‡**
   - è¿è¡Œ `.\start-dev.ps1` å¯åŠ¨ç³»ç»Ÿ
   - ç¡®è®¤æ•°æ®åº“æœ‰æµ‹è¯•æ•°æ®
   - å‡†å¤‡å¥½æ¼”ç¤ºè´¦å·

2. **æ¼”ç¤ºå†…å®¹**
   - ç³»ç»Ÿæ¶æ„ï¼šå‰åç«¯åˆ†ç¦»ï¼ŒSpring Boot + React
   - æ ¸å¿ƒåŠŸèƒ½ï¼šåœ°å›¾å¯è§†åŒ–ã€è®¾æ–½ç®¡ç†ã€æ•°æ®ç»Ÿè®¡
   - æŠ€æœ¯äº®ç‚¹ï¼šWebGIS é›†æˆã€å“åº”å¼è®¾è®¡ã€JWT è®¤è¯

3. **Q&A å‡†å¤‡**
   - æŠ€æœ¯é€‰å‹ç†ç”±
   - æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
   - å®‰å…¨æ€§è€ƒè™‘

### å¤‡ç”¨æ–¹æ¡ˆ

å¦‚æœç°åœºç½‘ç»œä¸å¥½ï¼Œå»ºè®®ï¼š

- æå‰å½•åˆ¶æ¼”ç¤ºè§†é¢‘
- å‡†å¤‡ç³»ç»Ÿæˆªå›¾å’Œæ¶æ„å›¾
- ä½¿ç”¨ç”Ÿäº§æ¨¡å¼æ‰“åŒ…ï¼Œé¿å…ä¾èµ–ç½‘ç»œä¸‹è½½

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. ç¯å¢ƒå˜é‡é…ç½®ï¼ˆJAVA_HOME, PATHï¼‰
2. æ•°æ®åº“è¿æ¥çŠ¶æ€
3. ç«¯å£å ç”¨æƒ…å†µ
4. æ—¥å¿—è¾“å‡ºä¿¡æ¯

---

**ç¥è®ºæ–‡æ¼”ç¤ºé¡ºåˆ©ï¼** ğŸ‰
